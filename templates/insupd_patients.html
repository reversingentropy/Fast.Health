{% extends "parent.html" %}
{% block title %}Patients{% endblock %}
{% block head %}
	<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
{% endblock %}
{% block content %}
<!-- Bootstrap Date-Picker Plugin -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css"/>
<script type="text/javascript" language="javascript">
    $(document).ready(function(){
      var date_input=$('input[name="dob"]'); //our date input has the name "date"
      var container=$('.bootstrap-iso form').length>0 ? $('.bootstrap-iso form').parent() : "body";
      var options={
        format: 'yyyy/mm/dd',
        container: container,
        todayHighlight: true,
        autoclose: true,
      };
      date_input.datepicker(options);
    });


	function selectElement(id, valueToSelect) {    
    	let element = document.getElementById(id);
    	element.value = valueToSelect;
	}


</script>

	<h3 style="text-align:center; color:White">New Patient</h3>
	<br />
			<form action="/patient" method="POST" >
				<input type="hidden" id="patientid" name="patientid" value="{{patient_dict['patientid'] }}">
				<div class="form-row">
					<div class="form-group col-md-9">
						<label for="name" class="form-label">Name</label>
						<input type="text" class="form-control" id="name" name="name" value="{{patient_dict['patientname'] }}" >
					</div>
					<div class="form-group col-md-3" >
						<label for="gender" class="form-label">Gender</label>
						<select class="form-control form-select" id="gender" name="gender" >
							<option selected>Choose...</option>
								<option value="Male">Male </option>
								<option value="Female">Female</option>		
								<script>
									selectElement('gender', "{{patient_dict['gender']}}");	
								</script>
						</select>
					</div>
				</div>				
				<div class="form-row">
					<div class="form-group  col-4">
						<label for="nricno" class="form-label">NRIC No.</label>
						<input type="text" class="form-control" id="nricno" name="nricno" placeholder="SXXXXXXX" value="{{patient_dict['nricno']}}">
					</div>
					<div class="form-group col-md-4">
						<label for="age" class="form-label">Age</label>
						<input type="number" class="form-control" id="age" name="age" value="{{patient_dict['age']}}">
					</div>
					<div class="form-group col-md-4">
						<label for="dob" class="form-label">Date of Birth</label>
						<input type="text" class="form-control" id="dob" name="dob" placeholder="YYYY/MM/DD" value="{{patient_dict['dob'] }}">	
					</div>
				</div>
				<div class="form-row">
					<div class="col-6">
						<label for="email" class="form-label">Email</label>
						<input type="email" class="form-control" id="email" name="email" placeholder="" value="{{patient_dict['email']}}">
					</div>
					<div class="col-6">
						<label for="contactno" class="form-label">Contact Number</label>
						<input type="tel" class="form-control" id="contactno" name="contactno" value="{{patient_dict['contactno']}}" >
					</div>
				</div>
				<div class="form-row">
					<div class="col-9">
						<label for="address" class="form-label">Address</label>
						<input type="text" class="form-control" id="address" name="address" placeholder="Apartment, studio, or floor" value="{{patient_dict['address']}}">
					</div>
					<div class="col-md-3">
						<label for="postcode" class="form-label">Postcode</label>
						<input type="number" class="form-control" id="postcode" name="postcode" value="{{patient_dict['postcode']}}">
					</div>
				</div>
				<br>
				<div class="form-row">
					<div class="col-xs-3>">
						{% if action == 'insert' %}
					  	<button type="submit" class="btn btn-primary btn-lg" name="action" value="insert">Add</button>
						{% else %}
						<button type="submit" class="btn btn-primary btn-lg" name="action" value="update">Update</button>
						{% endif %}
					</div>
					<div class="col-xs-3>">
						<button type="reset" class="btn btn-primary btn-lg" value="Reset">Clear</button>
					</div>
				</div>
				<br>
			</form>			
			<div class="card" style="width: 18rem;">
				<div class="card-body">
				  <h5 class="card-title">Status:</h5>
				  <p class="card-text">{{message}}</p>
				</div>
			  </div>
<br />
<br />

{% endblock %}